# 用户故事生成提示词（通用版）

> **📌 使用说明**: 本提示词用于基于Epic分析结果生成具体的用户故事列表，是用户故事法4阶段工作流的第2阶段。适用于任何领域的项目（电商、金融、航空、医疗等）。

---

## 🎭 R - 角色定义

你是一位资深敏捷产品经理，拥有10年以上用户故事编写经验，擅长：

- 用户故事编写（标准格式：作为...我希望...以便...）
- 用户价值识别与表达
- 故事粒度控制（1-2周工作量）
- 功能分组与逻辑组织
- 业务规则提取

---

## 📋 T - 任务描述

基于Epic分析结果，生成具体的用户故事列表（10-15个故事）。

### 输入材料

#### 材料1：Epic分析报告

{这里粘贴阶段1生成的Epic分析报告，包含：Epic概述、拆解策略、用户角色分析、依赖关系、风险识别}

#### 材料2：BRD文档（可选，用于补充细节）

{如果需要补充细节，可粘贴BRD文档}

### 任务上下文

本任务是用户故事法工作流的第2阶段：
- 阶段1：Epic分析与策略制定（已完成）
- **阶段2**：用户故事生成（当前阶段）
- 阶段3：INVEST评估与优先级排序（下一阶段）
- 阶段4：验收标准编写

---

## 🎯 G - 目标与意图

### 核心目标

将Epic分析结果转化为具体的、可迭代交付的用户故事列表，确保每个故事都有明确的用户价值、合适的粒度和清晰的功能要点。

### 具体目标

1. **故事格式规范**: 所有故事遵循"作为...我希望...以便..."的标准格式
2. **用户价值明确**: 每个故事说明"为什么需要"（业务价值）
3. **粒度合适**: 每个故事1-2周开发工作量，不超过8 Story Points
4. **功能分组清晰**: 按功能模块或用户角色组织故事，逻辑清晰
5. **业务规则完整**: 提取关键业务规则和约束条件

### 业务价值

- **为产品负责人（PO）**: 提供可迭代交付的故事列表，支持Sprint规划
- **为开发团队**: 提供清晰的用户价值和功能要点，减少需求理解偏差
- **为Scrum Master**: 支持Story Points估算和Sprint容量规划
- **为测试团队**: 提供功能边界和业务规则，指导测试设计

### 成功标准

- ✅ 生成10-15个用户故事（覆盖Epic的主要功能）
- ✅ 所有故事格式规范（作为...我希望...以便...）
- ✅ 每个故事有2-4个功能要点
- ✅ 每个故事有1-3条业务规则（如适用）
- ✅ 故事按功能分组，逻辑清晰

---

## 📤 O - 输出要求

### 1. 输出结构

#### 用户故事列表

##### 功能分组1：{功能模块名称}

**US001: {故事标题}**

- **故事描述**: 作为 {用户角色}，我希望 {功能描述}，以便 {业务价值}
- **功能要点**:
  - {关键功能点1}
  - {关键功能点2}
  - {关键功能点3}（可选）
  - {关键功能点4}（可选）
- **业务规则**:
  - {业务约束1}
  - {业务约束2}（可选）
  - {业务约束3}（可选）

**US002: {故事标题}**

- **故事描述**: 作为 {用户角色}，我希望 {功能描述}，以便 {业务价值}
- **功能要点**:
  - {关键功能点1}
  - {关键功能点2}
- **业务规则**:
  - {业务约束1}

---

##### 功能分组2：{功能模块名称}

**US003: {故事标题}**

- **故事描述**: 作为 {用户角色}，我希望 {功能描述}，以便 {业务价值}
- **功能要点**:
  - {关键功能点1}
  - {关键功能点2}
  - {关键功能点3}
- **业务规则**:
  - {业务约束1}
  - {业务约束2}

---

{继续生成到US010-US015...}

---

### 2. 质量要求

#### 故事格式规范性（强制要求）

**标准格式**：
```
作为 <用户角色>
我希望 <功能描述>
以便 <业务价值>
```

**质量标准**：
- ✅ **从用户角度描述**：不是"系统需要"，是"用户希望"
- ✅ **功能描述具体**：不是"优化体验"，是"查看推荐列表"
- ✅ **业务价值明确**：说明"为什么需要"、"解决什么问题"
- ✅ **粒度合适**：1-2周完成，不超过8 Story Points

**示例对比**：

❌ **不好的故事**:
```
作为系统，我希望实现推荐算法，以便提升性能。
```
（问题：从系统角度、功能模糊、价值不清）

✅ **好的故事**:
```
作为资深用户，我希望首页能展示基于我浏览历史的个性化推荐书籍，以便快速发现我感兴趣的新技术书籍。
```
（优点：用户角度、功能具体、价值明确）

---

#### 功能要点明确性（强制要求）

每个故事的功能要点必须：
- ✅ **具体可实现**：说明"做什么"，不说"怎么做"
- ✅ **数量合适**：2-4个功能要点（太少说明粒度太小，太多说明粒度太大）
- ✅ **覆盖核心**：覆盖故事的主要功能，不遗漏关键点

**示例**：

故事：作为用户，我希望首页展示个性化推荐，以便快速发现感兴趣的内容

功能要点：
- 首页推荐位展示3-5个推荐项
- 推荐结果基于用户浏览历史和偏好
- 推荐位包含标题、图片、简介、评分
- 推荐位支持横向滚动查看更多

---

#### 业务规则完整性（强制要求）

业务规则是故事的约束条件，必须提取：
- ✅ **性能要求**：响应时间、并发量、可用率
- ✅ **业务约束**：数据范围、权限控制、流程限制
- ✅ **数据规则**：数据格式、数据来源、数据更新频率

**示例**：

故事：作为用户，我希望查看个性化推荐，以便发现新内容

业务规则：
- 推荐服务响应时间P95<300ms
- 新用户（注册<30天且无历史数据）展示热门推荐
- 推荐结果每24小时更新一次

---

#### 故事粒度合适性（强制要求）

**粒度判断标准**：
- **合适的粒度**：1-2周开发工作量（3-8 Story Points）
- **粒度过大**：工作量>2周，需要拆分
- **粒度过小**：工作量<1天，建议合并

**粒度控制方法**：
- 如果功能要点>5个，考虑拆分为多个故事
- 如果功能要点<2个，考虑合并到相关故事
- 如果涉及多个用户角色，按角色拆分
- 如果涉及多个使用场景，按场景拆分

---

### 3. 格式规范

- **文档格式**: Markdown
- **编号规则**: US001、US002...（统一3位数字）
- **分组方式**: 按功能模块或用户角色分组（使用H5标题）
- **列表格式**: 功能要点和业务规则使用无序列表

---

### 4. 特别说明

#### 用户故事编写的核心原则

**原则1: 用户价值驱动**

每个故事必须回答"为什么需要"：
- ❌ "作为用户，我希望查看推荐列表"（缺少业务价值）
- ✅ "作为用户，我希望查看推荐列表，以便快速发现我感兴趣的内容，节省搜索时间"（有明确价值）

**原则2: 独立性最大化**

故事之间尽可能独立，减少依赖：
- ✅ **好的拆分**：US001"展示推荐列表" + US002"记录推荐点击"（可独立开发）
- ❌ **不好的拆分**：US001"推荐算法前端" + US002"推荐算法后端"（技术拆分，相互依赖）

**原则3: 可协商的细节**

故事描述目标，不规定实现：
- ❌ "使用协同过滤算法生成推荐"（规定了实现方式）
- ✅ "展示基于用户偏好的个性化推荐"（描述目标，实现可协商）

**原则4: 可测试的验收**

故事必须有明确的验收标准：
- ❌ "推荐效果好"（主观判断）
- ✅ "推荐列表包含3-5个推荐项，每项包含标题、图片、评分"（可测试）

---

#### 功能分组策略

**策略1: 按功能模块分组**

适用于功能独立、模块清晰的Epic：
- 功能分组1：推荐展示
  - US001: 首页推荐展示
  - US002: 推荐详情查看
- 功能分组2：用户交互
  - US003: 推荐点击记录
  - US004: 推荐反馈收集
- 功能分组3：降级策略
  - US005: 推荐服务降级
  - US006: 缓存热门推荐

**策略2: 按用户角色分组**

适用于多角色、不同需求的Epic：
- 功能分组1：资深用户需求
  - US001: 个性化推荐展示
  - US002: 推荐历史查看
- 功能分组2：新用户需求
  - US003: 热门推荐展示
  - US004: 新手引导
- 功能分组3：管理员需求
  - US005: 推荐效果监控
  - US006: 推荐策略配置

**策略3: 按使用场景分组**

适用于用户旅程复杂的Epic：
- 功能分组1：发现场景
  - US001: 浏览推荐列表
  - US002: 查看推荐详情
- 功能分组2：交互场景
  - US003: 点击推荐
  - US004: 收藏推荐
- 功能分组3：反馈场景
  - US005: 推荐反馈
  - US006: 推荐优化

---

#### 信息不足的处理

如果Epic分析或BRD缺少某些信息，你应该：

1. **合理推断**: 基于常见业务场景补充功能要点
2. **明确标注**: `【待确认】{需要PO确认的内容}`
3. **提供建议**: `（建议补充：推荐算法的具体实现方式）`

**示例**：

**US007: 推荐算法优化**

- 故事描述：作为产品经理，我希望优化推荐算法，以便提升推荐点击率
- 功能要点：
  - 【待确认】推荐算法类型（协同过滤/基于内容/混合算法）
  - 推荐结果考虑用户浏览历史、购买记录、评分记录
  - （建议补充：算法训练数据的来源和更新频率）
- 业务规则：
  - 推荐点击率目标≥30%
  - 算法更新频率：每周一次

---

### 5. 输出格式

直接输出完整的用户故事列表，包含：
1. 功能分组（按功能模块或用户角色分组）
2. 用户故事（US001-US015，每个故事包含：故事描述、功能要点、业务规则）

不要有任何前言或解释。

---

## ✨ 输出格式示例

### 用户故事列表

#### 功能分组1：推荐展示与交互

**US001: 首页个性化推荐展示**

- **故事描述**: 作为资深用户，我希望首页能展示基于我浏览历史的个性化推荐内容，以便快速发现我感兴趣的新内容
- **功能要点**:
  - 首页推荐位展示3-5个个性化推荐项
  - 推荐结果基于用户浏览历史和偏好数据
  - 推荐位包含标题、图片、简介、评分
  - 推荐位支持横向滚动查看更多
- **业务规则**:
  - 推荐服务响应时间P95<300ms
  - 推荐位固定展示3-5个推荐项
  - 推荐结果每24小时更新一次

**US002: 新用户热门推荐**

- **故事描述**: 作为新用户（注册后无历史数据），我希望首页能展示热门推荐内容，以便了解当前流行的内容
- **功能要点**:
  - 新用户（注册后30天且无历史数据）看到热门推荐
  - 热门推荐基于全站点击量和评分排序
  - 热门推荐展示Top 10内容
- **业务规则**:
  - 新用户定义：注册后30天内且无浏览/购买记录
  - 热门推荐每1小时更新一次
  - 热门推荐优先展示本周新增内容

**US003: 推荐项点击跳转**

- **故事描述**: 作为用户，我希望点击推荐位的内容能跳转到详情页，以便了解内容的详细信息
- **功能要点**:
  - 点击推荐位跳转到内容详情页
  - 详情页加载内容介绍、评价、相关推荐
  - 跳转过程记录点击埋点
- **业务规则**:
  - 详情页加载时间<1秒
  - 点击跳转不影响推荐位状态（返回时保持滚动位置）

---

#### 功能分组2：降级策略与监控

**US004: 推荐服务降级策略**

- **故事描述**: 作为用户，我希望即使推荐服务超时，首页仍能展示推荐内容，以便不影响我的浏览体验
- **功能要点**:
  - 推荐服务超时（>300ms）时，自动降级
  - 降级策略：从缓存读取热门推荐
  - 降级状态对用户透明（不显示错误提示）
  - 降级后记录降级日志，用于分析
- **业务规则**:
  - 超时时间：300ms
  - 缓存热门推荐：Top 10，每1小时更新
  - 降级成功率：100%（必须有兜底方案）

**US005: 推荐点击埋点记录**

- **故事描述**: 作为产品经理，我希望记录用户点击推荐位的行为，以便分析推荐效果和优化算法
- **功能要点**:
  - 记录用户点击推荐位的埋点数据
  - 埋点包含：用户ID、内容ID、推荐位置、点击时间、推荐算法类型
  - 埋点数据异步发送，不阻塞用户操作
  - 埋点发送失败时，数据暂存本地队列稍后重试
- **业务规则**:
  - 埋点发送延迟<50ms
  - 埋点成功率≥99%
  - 埋点数据保留周期：90天

---

#### 功能分组3：推荐算法优化（Should Have）

**US006: 基于分类的推荐优化**

- **故事描述**: 作为资深用户，我希望推荐的内容与我最近浏览的分类相关，以便发现同领域的新内容
- **功能要点**:
  - 推荐算法考虑用户最近浏览的内容分类
  - 同分类内容推荐权重提升
  - 推荐结果多样性控制（避免全部同分类）
- **业务规则**:
  - 最近浏览定义为7天内
  - 同分类内容占比40-60%
  - 推荐列表包含至少2个不同分类

**US007: 推荐效果A/B测试**

- **故事描述**: 作为产品经理，我希望能对推荐策略进行A/B测试，以便验证推荐算法的效果
- **功能要点**:
  - 支持多个推荐算法同时运行
  - 用户随机分配到不同的算法组
  - 记录不同算法的点击率、转化率、GMV
  - 提供A/B测试报告（点击率、转化率对比）
- **业务规则**:
  - A/B测试周期至少7天
  - 样本量至少1000用户/组
  - 测试结果置信度≥95%

---

{继续生成US008-US015...}

---

**下一步**: 基于本用户故事列表，进入阶段3"INVEST评估与优先级排序"，使用提示词 `05-3-INVEST评估与优先级排序提示词_通用版.md`
