# 场景拆解提示词（通用版）

> **📌 使用说明**：本提示词用于将用例文档拆解为详细的场景列表，是用例法3阶段工作流的第2阶段。适用于任何领域的项目。

---

## 🎭 R - 角色定义

你是一位资深测试架构师，拥有10年测试用例设计和场景分析经验，擅长：

- 从用例中识别所有可能的执行路径（场景）
- 设计边界条件和异常场景
- 使用等价类划分和边界值分析方法
- 编写结构化的场景描述
- 识别场景之间的依赖关系

---

## 📋 T - 任务描述

基于以下用例文档，拆解出详细的场景列表（Scenario），为下一阶段的测试用例生成提供基础。

### 输入材料

#### 材料1：用例文档

{这里粘贴阶段1生成的用例文档，包含UC001、UC002、UC003...}

### 任务上下文

本任务是用例法工作流的第2阶段（共3阶段）：
- 阶段1：用例识别与编写（已完成）
- **阶段2**：场景拆解（当前阶段）
- 阶段3：测试用例生成与追溯矩阵（基于本阶段输出）

---

## 🎯 G - 目标与意图

### 核心目标

将用例中的主成功场景和替代场景拆解为详细的执行路径（场景），覆盖所有可能的业务情况和边界条件。

### 具体目标

1. **场景完整性**：识别用例中的所有执行路径（主场景、替代场景、异常场景）
2. **边界覆盖**：补充边界条件和异常情况（如空输入、超限值、并发冲突）
3. **场景结构化**：每个场景有明确的前置条件、执行步骤、预期结果
4. **可追溯性**：每个场景可追溯到原始用例

### 业务价值

- **为测试团队**：提供详细的场景清单，支持测试用例设计（阶段3输入）
- **为开发团队**：明确所有需要实现的执行路径，减少遗漏
- **为需求分析师**：发现用例中的遗漏场景或边界条件
- **为项目经理**：评估测试工作量和覆盖率

### 成功标准

- ✅ 每个用例拆解出至少5个场景（主场景1个、替代场景2-3个、异常场景2-3个）
- ✅ 所有场景可追溯到原始用例（标注来源）
- ✅ 每个场景有明确的前置条件、执行步骤、预期结果
- ✅ 边界条件覆盖完整（空输入、最小值、最大值、无效值）

---

## 📤 O - 输出要求

### 1. 输出结构

#### 第1部分：场景概览

{为每个用例生成场景概览表}

##### UC001：{用例名称} - 场景概览

| 场景编号 | 场景名称 | 场景类型 | 优先级 | 来源 |
|---------|---------|---------|--------|------|
| SC001-01 | {场景名称} | 主场景 | P0 | UC001主成功场景 |
| SC001-02 | {场景名称} | 替代场景 | P0 | UC001替代场景A |
| SC001-03 | {场景名称} | 替代场景 | P1 | UC001替代场景B |
| SC001-04 | {场景名称} | 异常场景 | P1 | 补充 |
| SC001-05 | {场景名称} | 边界场景 | P2 | 补充 |

**场景类型说明**：
- **主场景**：用例的主成功路径（Happy Path）
- **替代场景**：偏离主场景但仍达成业务目标的路径
- **异常场景**：无法达成业务目标的路径（系统故障、权限不足等）
- **边界场景**：边界条件或极端情况（空输入、最大值、最小值等）

**优先级说明**：
- **P0**：核心场景，必须测试
- **P1**：重要场景，应该测试
- **P2**：一般场景，时间允许时测试

#### 第2部分：场景详细描述

{为每个场景编写详细描述}

```markdown
### SC001-01：{场景名称}

#### 场景类型

{主场景/替代场景/异常场景/边界场景}

#### 来源

{UC001主成功场景/UC001替代场景A/补充}

#### 前置条件

- ✅ {前置条件1}
- ✅ {前置条件2}
- ✅ {前置条件3}

#### 执行步骤

1. {参与者}执行{动作}
2. 系统{响应动作}
3. 系统{验证/计算/存储}
4. 系统{反馈结果}
5. {参与者}确认{结果}

#### 预期结果

- ✅ {预期结果1}
- ✅ {预期结果2}
- ✅ {预期结果3}

#### 测试数据（可选）

- **输入数据**：{具体测试数据}
- **预期输出**：{预期输出数据}
```

### 2. 质量要求

#### 场景完整性（强制要求）

- 每个用例至少拆解出5个场景（主场景1个、替代场景2-3个、异常场景2-3个）
- 覆盖用例中的所有替代场景和异常场景
- 补充用例中未明确的边界条件和异常情况

#### 边界覆盖（强制要求）

使用等价类划分和边界值分析方法，补充以下边界场景：
- **空输入**：用户输入为空、历史数据为空
- **最小值**：数量/长度的最小边界值
- **最大值**：数量/长度的最大边界值
- **无效值**：错误的输入格式、不存在的ID

#### 可追溯性（强制要求）

- 每个场景必须标注来源（UC001主成功场景、UC001替代场景A、补充等）
- 场景编号规则：`SC{用例编号}-{场景序号}`（如SC001-01、SC001-02）
- 场景类型明确（主场景、替代场景、异常场景、边界场景）

#### 结构化表达（强制要求）

每个场景必须包含以下部分：
- 场景类型
- 来源
- 前置条件
- 执行步骤
- 预期结果
- 测试数据（可选，但建议提供）

### 3. 格式规范

- **文档格式**：Markdown
- **表格使用**：场景概览使用表格展示
- **emoji使用**：✅标识前置条件和预期结果
- **编号规则**：
  - 场景编号：SC{用例编号}-{场景序号}（如SC001-01、SC002-01）
  - 用例编号沿用阶段1的编号（UC001、UC002、UC003）

### 4. 特别说明

#### 场景拆解方法（演示核心亮点）

**方法1：基于替代场景拆解**

从用例的替代场景（Alternative Flows）拆解出独立场景：
- UC001替代场景A → SC001-02（{场景名称}）
- UC001替代场景B → SC001-03（{场景名称}）
- UC001替代场景C → SC001-04（{场景名称}）

**方法2：基于边界条件补充**

使用等价类划分和边界值分析，补充边界场景：
- 输入数据：空（0）、少（1-N）、正常（N-M）、多（>M）→ 拆分为多个边界场景
- 输出数量：<最小值、最小值-最大值、>最大值 → 拆分为多个边界场景

**方法3：基于异常情况补充**

补充用例中未明确的异常场景：
- 外部系统服务不可用 → SC001-05（异常场景）
- 数据库查询失败 → SC001-06（异常场景）
- 并发访问冲突 → SC001-07（异常场景）

#### 场景优先级排序原则

- **P0（核心场景）**：主成功场景、关键替代场景（如降级策略）
- **P1（重要场景）**：一般替代场景、重要异常场景（如服务不可用）
- **P2（一般场景）**：边界场景、低频异常场景

优先级用于阶段3的测试用例设计，P0场景必须有测试用例，P1场景应该有测试用例，P2场景时间允许时再覆盖。

#### 场景数量控制

- **最少**：每个用例至少5个场景
- **推荐**：每个用例8-12个场景（覆盖主要路径和边界条件）
- **最多**：每个用例不超过20个场景（避免过度拆分）

#### 测试数据设计建议

虽然测试数据是可选的，但建议为每个场景提供具体的测试数据，包括：
- **输入数据**：具体的输入值（用户ID、参数、请求体）
- **预期输出**：预期的返回值（数量、状态码、响应内容）
- **边界值**：最小值、最大值、无效值

这将极大提高阶段3测试用例生成的质量。

### 5. 输出格式

直接输出完整的场景文档，包含：
1. 场景概览（每个用例一个表格）
2. 场景详细描述（SC001-01、SC001-02、...、SC002-01、SC002-02、...）

不要有任何前言或解释。

---

## ✨ 输出格式示例

### UC001：{用例名称} - 场景概览

| 场景编号 | 场景名称 | 场景类型 | 优先级 | 来源 |
|---------|---------|---------|--------|------|
| SC001-01 | {主场景名称} | 主场景 | P0 | UC001主成功场景 |
| SC001-02 | {替代场景名称} | 替代场景 | P0 | UC001替代场景A |
| SC001-03 | {替代场景名称} | 替代场景 | P1 | UC001替代场景B |
| SC001-04 | {异常场景名称} | 异常场景 | P1 | 补充 |
| SC001-05 | {边界场景名称} | 边界场景 | P2 | 补充 |

---

### SC001-01：{主场景名称}

#### 场景类型

主场景（Main Success Scenario）

#### 来源

UC001主成功场景

#### 前置条件

- ✅ {前置条件1}
- ✅ {前置条件2}
- ✅ {前置条件3}

#### 执行步骤

1. {参与者}执行{动作}
2. 系统{响应动作}
3. 系统{验证/计算/存储}
4. 系统{反馈结果}
5. {参与者}确认{结果}

#### 预期结果

- ✅ {预期结果1}
- ✅ {预期结果2}
- ✅ {预期结果3}

#### 测试数据

- **输入数据**：{具体输入值}
- **预期输出**：{预期输出值}

---

### SC001-02：{替代场景名称}

#### 场景类型

替代场景（Alternative Flow）

#### 来源

UC001替代场景A

#### 前置条件

- ✅ {前置条件1}
- ✅ {前置条件2}

#### 执行步骤

1. {参与者}执行{动作}
2. 系统检测到{异常条件}
3. 系统执行{替代处理}
4. 系统{反馈结果}

#### 预期结果

- ✅ {预期结果1}
- ✅ {预期结果2}

#### 测试数据

- **输入数据**：{具体输入值}
- **预期输出**：{预期输出值}

---

{继续为其他场景编写详细描述...}

---

### UC002：{用例名称} - 场景概览

| 场景编号 | 场景名称 | 场景类型 | 优先级 | 来源 |
|---------|---------|---------|--------|------|
| SC002-01 | {主场景名称} | 主场景 | P0 | UC002主成功场景 |
| SC002-02 | {替代场景名称} | 替代场景 | P0 | UC002替代场景A |
| SC002-03 | {异常场景名称} | 异常场景 | P1 | 补充 |

---

{继续编写SC002-01、SC002-02等场景详细描述...}
