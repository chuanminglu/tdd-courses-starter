# 验收标准编写提示词（通用版）

> **📌 使用说明**: 本提示词用于为高优先级用户故事编写详细的验收标准，是用户故事法4阶段工作流的第4阶段（最终阶段）。适用于任何领域的项目（电商、金融、航空、医疗等）。

---

## 🎭 R - 角色定义

你是一位资深测试架构师，拥有10年以上验收测试和BDD实践经验，擅长：

- Given-When-Then格式验收标准编写
- 边界条件和异常场景识别
- 性能和非功能需求定义
- UI/UX验收标准设计
- 验收测试自动化

---

## 📋 T - 任务描述

基于优先级排序结果，为Must Have的高优先级用户故事编写详细的验收标准（至少3-5个故事）。

### 输入材料

#### 材料1：优先级排序结果

{这里粘贴阶段3生成的MoSCoW优先级分类，特别是Must Have的故事列表}

#### 材料2：用户故事详情

{这里粘贴需要编写验收标准的用户故事详情（故事描述、功能要点、业务规则）}

### 任务上下文

本任务是用户故事法工作流的第4阶段（最终阶段）：
- 阶段1：Epic分析与策略制定（已完成）
- 阶段2：用户故事生成（已完成）
- 阶段3：INVEST评估与优先级排序（已完成）
- **阶段4**：验收标准编写（当前阶段）

---

## 🎯 G - 目标与意图

### 核心目标

为高优先级用户故事编写详细、可测试的验收标准，确保每个故事都有明确的"完成定义"（Definition of Done），支持测试团队设计测试用例和自动化测试。

### 具体目标

1. **Given-When-Then格式**: 所有验收标准使用标准BDD格式
2. **覆盖全面**: 覆盖正常流程、异常流程、边界条件
3. **可测试性强**: 每个标准都可以通过测试验证（自动化或手工）
4. **量化指标**: 使用具体数字（<300ms、≥99%、Top 10），不用模糊表达
5. **包含非功能需求**: 性能要求、UI/UX要求、监控要求

### 业务价值

- **为测试团队**: 提供明确的测试用例设计依据，支持验收测试
- **为开发团队**: 提供"完成定义"，明确开发目标和验收标准
- **为产品负责人（PO）**: 提供验收依据，判断故事是否达到交付标准
- **为自动化测试**: 提供BDD格式标准，支持自动化测试脚本生成

### 成功标准

- ✅ 每个故事有3-6条验收标准（覆盖主流程和异常流程）
- ✅ 所有标准使用Given-When-Then格式
- ✅ 至少1条边界条件标准（空输入、最大值、最小值、无效值）
- ✅ 包含性能要求（响应时间、并发量、可用率）
- ✅ 包含UI/UX要求（关键界面元素、交互行为）

---

## 📤 O - 输出要求

### 1. 输出结构

#### 验收标准文档

##### US001: {故事标题}

**故事描述**: {用户故事完整描述（作为...我希望...以便...）}

**验收标准**:

1. **Given** {前置条件}  
   **When** {用户操作}  
   **Then** {预期结果}

2. **Given** {前置条件}  
   **When** {用户操作}  
   **Then** {预期结果}

3. **Given** {前置条件}  
   **When** {用户操作}  
   **Then** {预期结果}

4. **Given** {前置条件}（边界条件）  
   **When** {用户操作}  
   **Then** {预期结果}

**边界条件**:
- {异常情况1}: {描述及处理方式}
- {异常情况2}: {描述及处理方式}
- {异常情况3}: {描述及处理方式}

**性能要求**:
- 响应时间: {具体指标，如P95<300ms}
- 并发用户: {具体数量，如支持1000+并发}
- 可用率: {具体指标，如≥99.5%}

**UI/UX要求**:
- 界面元素: {关键界面元素，如推荐位包含标题、图片、评分}
- 交互行为: {用户交互要求，如点击跳转、滑动加载}
- 加载状态: {加载态展示，如骨架屏、Loading动画}

**监控要求**（可选）:
- 监控指标: {需要监控的指标，如推荐点击率、降级率}
- 告警阈值: {告警条件，如降级率≥10%时发送告警}

---

##### US002: {故事标题}

{重复US001的结构...}

---

{继续为其他高优先级故事编写验收标准...}

---

### 2. 质量要求

#### Given-When-Then格式规范（强制要求）

**Given（前置条件）**：
- 描述系统状态或用户状态
- 说明测试开始前的准备工作
- 示例："用户已登录且有浏览历史（至少10条记录）"

**When（用户操作）**：
- 描述用户的具体操作
- 使用动作动词（访问、点击、输入、查看）
- 示例："用户访问首页"

**Then（预期结果）**：
- 描述系统的响应或状态变化
- 使用可验证的表达（展示3-5个推荐项，不是"展示推荐"）
- 示例："首页推荐位展示3-5个个性化推荐项"

**格式示例**：

✅ **好的验收标准**:
```
Given 用户已登录且有浏览历史（至少10条记录）
When 用户访问首页
Then 首页推荐位展示3-5个个性化推荐项
```

❌ **不好的验收标准**:
```
Given 用户登录
When 访问首页
Then 显示推荐
```
（问题：前置条件不具体、操作不明确、结果不可验证）

---

#### 覆盖全面性（强制要求）

每个故事的验收标准必须覆盖：
- ✅ **正常流程**: 主成功场景（Happy Path）
- ✅ **异常流程**: 系统错误、网络异常、权限不足
- ✅ **边界条件**: 空输入、最大值、最小值、无效值
- ✅ **性能要求**: 响应时间、并发量、可用率
- ✅ **UI/UX要求**: 界面元素、交互行为、加载状态

**覆盖示例**：

故事：作为用户，我希望首页展示个性化推荐，以便快速发现感兴趣的内容

验收标准：
1. **正常流程**: Given 用户已登录且有浏览历史，When 访问首页，Then 展示3-5个个性化推荐项
2. **新用户场景**: Given 用户已登录但无浏览历史，When 访问首页，Then 展示热门推荐项
3. **异常流程**: Given 推荐服务超时（>300ms），When 访问首页，Then 自动降级展示热门推荐项
4. **边界条件**: Given 用户浏览历史<10条，When 访问首页，Then 展示热门推荐项
5. **UI验证**: Given 推荐位已展示，When 用户查看，Then 每项包含标题、图片、评分、简介

---

#### 量化指标明确性（强制要求）

验收标准必须使用具体数字，避免模糊表达：
- ❌ "推荐速度快"（模糊）
- ✅ "推荐服务响应时间P95<300ms"（量化）

- ❌ "推荐列表展示多个推荐项"（模糊）
- ✅ "推荐列表展示3-5个推荐项"（量化）

- ❌ "推荐结果准确"（模糊）
- ✅ "推荐结果与用户浏览历史相关度≥70%"（量化）

---

#### 可测试性强度（强制要求）

每个验收标准必须可以通过测试验证：
- ✅ **自动化测试**: 可以编写自动化测试脚本（UI测试、API测试）
- ✅ **手工测试**: 测试人员可以手工验证
- ✅ **判定标准明确**: 有明确的"通过/失败"判定标准

**可测试性示例**：

❌ **不可测试**:
```
Then 推荐效果好
```
（问题：主观判断，无法验证）

✅ **可测试**:
```
Then 推荐列表包含3-5个推荐项，每项包含标题、图片、评分、简介
```
（可验证：检查推荐项数量、检查每项字段）

---

### 3. 格式规范

- **文档格式**: Markdown
- **Given-When-Then格式**: 使用加粗标识关键字
- **列表格式**: 边界条件、性能要求、UI/UX要求使用无序列表
- **表格格式**: 如果需要对比多个场景，可使用表格

---

### 4. 特别说明

#### 验收标准编写的核心原则

**原则1: 从用户视角描述**

验收标准描述用户可见的行为和结果，不描述技术实现：
- ❌ "调用推荐算法API，返回JSON数据"（技术视角）
- ✅ "首页推荐位展示3-5个个性化推荐项"（用户视角）

**原则2: 具体可测试**

验收标准必须具体到可以编写测试用例：
- ❌ "推荐列表正确显示"（不具体）
- ✅ "推荐列表包含3-5个推荐项，每项包含标题、图片、评分（4个元素）"（具体）

**原则3: 独立可验证**

每个验收标准应该独立验证，不依赖其他标准：
- ✅ **好的拆分**: 标准1验证推荐列表展示，标准2验证点击跳转
- ❌ **不好的拆分**: 标准1验证推荐列表展示和点击跳转（两个验证点混在一起）

**原则4: 覆盖异常场景**

验收标准不仅覆盖Happy Path，还要覆盖异常场景：
- 系统错误（推荐服务超时、数据库异常）
- 用户输入错误（空输入、无效输入）
- 边界条件（新用户、历史数据不足）

---

#### 边界条件识别方法

**常见边界条件类型**：
1. **数据边界**: 空值、最小值、最大值、无效值
2. **时间边界**: 超时、过期、未来时间、历史时间
3. **权限边界**: 未登录、无权限、权限过期
4. **状态边界**: 新用户、活跃用户、流失用户
5. **数量边界**: 0个、1个、最大值、超过最大值

**边界条件示例**：

故事：作为用户，我希望查看推荐列表，以便发现新内容

边界条件：
- **数据边界**: 用户浏览历史=0条（展示热门推荐）
- **时间边界**: 推荐服务超时>300ms（降级到缓存）
- **权限边界**: 用户未登录（展示通用推荐）
- **状态边界**: 新用户注册<30天（展示新手推荐）
- **数量边界**: 推荐结果=0个（展示默认推荐）

---

#### 非功能需求定义

**性能要求**（必需）：
- 响应时间: P50、P95、P99延迟
- 吞吐量: QPS、TPS
- 并发量: 支持多少并发用户
- 可用率: 系统可用率（如99.5%、99.9%）

**UI/UX要求**（必需）：
- 界面元素: 关键界面元素（标题、图片、按钮、表单）
- 交互行为: 用户交互（点击、滑动、拖拽、长按）
- 加载状态: 加载态展示（骨架屏、Loading动画、空状态）
- 错误提示: 错误信息展示（Toast、Modal、Inline提示）

**监控要求**（可选）：
- 监控指标: 需要监控的业务指标（点击率、转化率、GMV）
- 告警阈值: 告警条件（降级率≥10%、错误率≥1%）
- 监控频率: 数据采集频率（实时、每分钟、每小时）

---

#### 信息不足的处理

如果用户故事缺少某些信息，你应该：

1. **合理推断**: 基于常见业务场景补充验收标准
2. **明确标注**: `【待确认】{需要PO确认的内容}`
3. **提供建议**: `（建议补充：推荐列表的排序规则）`

**示例**：

**US007: 推荐算法优化**

- 故事描述：作为产品经理，我希望优化推荐算法，以便提升推荐点击率

验收标准：
1. **Given** 用户已登录且有浏览历史  
   **When** 系统生成推荐列表  
   **Then** 推荐结果考虑用户浏览历史、购买记录、评分记录

2. **【待确认】Given** 推荐算法已优化  
   **When** 用户点击推荐项  
   **Then** 推荐点击率≥30%（需确认目标值）

3. **（建议补充）Given** 推荐算法已优化  
   **When** 对比优化前后数据  
   **Then** 推荐点击率提升≥5%（建议补充A/B测试方案）

---

### 5. 输出格式

直接输出完整的验收标准文档，包含：
1. 每个高优先级故事的验收标准（至少3-5个故事）
2. 每个故事包含：故事描述、验收标准（Given-When-Then）、边界条件、性能要求、UI/UX要求、监控要求（可选）

不要有任何前言或解释。

---

## ✨ 输出格式示例

### 验收标准文档

#### US001: 首页个性化推荐展示

**故事描述**: 作为资深用户，我希望首页能展示基于我浏览历史的个性化推荐内容，以便快速发现我感兴趣的新内容

**验收标准**:

1. **Given** 用户已登录且有浏览历史（至少10条记录）  
   **When** 用户访问首页  
   **Then** 首页推荐位展示3-5个个性化推荐项

2. **Given** 推荐位已展示推荐项  
   **When** 用户查看推荐位  
   **Then** 每个推荐项显示标题、图片、简介、评分（4个元素）

3. **Given** 用户有浏览历史  
   **When** 系统生成推荐列表  
   **Then** 推荐结果与用户浏览历史相关度≥70%（基于分类匹配）

4. **Given** 用户刷新首页  
   **When** 用户在24小时内多次访问  
   **Then** 推荐结果保持稳定（缓存24小时）

5. **Given** 用户浏览历史<10条（边界条件）  
   **When** 用户访问首页  
   **Then** 系统自动降级展示热门推荐项

**边界条件**:
- **推荐服务超时**: 超时时间>300ms时，自动降级展示热门推荐项
- **用户历史数据不足**: <10条浏览记录时，展示热门推荐项
- **推荐算法无结果**: 协同过滤无匹配时，降级到基于分类的推荐

**性能要求**:
- 首页加载时间（含推荐）：P95<500ms
- 推荐服务响应时间：P95<300ms
- 支持并发用户：1000+
- 推荐服务可用率：≥99.5%

**UI/UX要求**:
- 推荐位位置：首页第一屏，搜索框下方
- 推荐位布局：横向卡片滚动（3-5个推荐项）
- 加载状态：显示骨架屏，避免白屏
- 空状态：无推荐结果时，展示默认推荐或引导用户

**监控要求**:
- 监控指标：推荐展示次数、推荐点击次数、推荐点击率
- 告警阈值：推荐点击率<20%时发送告警
- 监控频率：实时采集，每小时汇总

---

#### US003: 推荐服务降级策略

**故事描述**: 作为用户，我希望即使推荐服务超时，首页仍能展示推荐内容，以便不影响我的浏览体验

**验收标准**:

1. **Given** 推荐服务响应时间>300ms  
   **When** 系统检测到超时  
   **Then** 自动从缓存读取热门推荐项

2. **Given** 降级到缓存热门推荐  
   **When** 用户查看首页推荐位  
   **Then** 展示Top 10热门推荐项（基于点击量和评分）

3. **Given** 缓存失效或为空  
   **When** 系统尝试读取缓存  
   **Then** 查询数据库，获取全站热门推荐项并回写缓存

4. **Given** 推荐服务恢复正常  
   **When** 下次用户访问首页  
   **Then** 恢复展示个性化推荐

5. **Given** 数据库查询超时>500ms（边界条件）  
   **When** 系统尝试查询数据库  
   **Then** 展示静态配置的默认推荐项

**边界条件**:
- **缓存失效**: 缓存过期时，查询数据库并重新缓存（过期时间1小时）
- **数据库查询超时**: 数据库查询>500ms时，展示静态配置的默认推荐项
- **降级对用户透明**: 不显示错误提示，用户无感知

**性能要求**:
- 降级响应时间：<100ms（从缓存读取）
- 缓存命中率：≥95%
- 降级成功率：100%（必须有兜底方案）
- 缓存更新频率：每1小时更新一次

**UI/UX要求**:
- 降级状态不影响UI展示（与正常推荐一致）
- 不显示错误提示或降级标识
- 降级期间用户可正常点击和浏览

**监控要求**:
- 监控指标：降级次数、降级原因、降级成功率
- 告警阈值：降级率≥10%时发送告警
- 监控频率：实时采集，每分钟汇总

---

#### US005: 推荐点击埋点记录

**故事描述**: 作为产品经理，我希望记录用户点击推荐位的行为，以便分析推荐效果和优化算法

**验收标准**:

1. **Given** 用户在首页推荐位  
   **When** 用户点击任意推荐项  
   **Then** 系统记录点击埋点数据

2. **Given** 埋点数据已记录  
   **When** 查询埋点数据库  
   **Then** 包含以下字段：用户ID、内容ID、推荐位置、点击时间、推荐算法类型

3. **Given** 埋点服务异步发送数据  
   **When** 用户点击推荐项  
   **Then** 不阻塞用户操作（点击后立即跳转详情页）

4. **Given** 埋点发送失败  
   **When** 网络异常或服务不可用  
   **Then** 数据暂存本地队列，稍后重试（最多重试3次）

5. **Given** 同一用户对同一内容的重复点击（边界条件）  
   **When** 5秒内重复点击  
   **Then** 去重处理，仅记录一次

**边界条件**:
- **埋点发送失败**: 不影响用户点击跳转，失败数据存入本地队列
- **重复点击**: 同一用户对同一内容的重复点击（5秒内）去重
- **埋点数据丢失**: 丢失率<1%（监控告警）

**性能要求**:
- 埋点发送延迟：<50ms（异步发送）
- 埋点成功率：≥99%
- 数据延迟：数据在1分钟内到达数据库
- 并发处理能力：支持1000+并发埋点请求

**UI/UX要求**:
- 埋点不影响用户点击体验（异步发送）
- 点击后立即跳转详情页（不等待埋点完成）
- 埋点失败不显示错误提示

**监控要求**:
- 监控指标：埋点发送次数、埋点成功率、埋点失败原因
- 告警阈值：埋点成功率<99%或丢失率≥1%时发送告警
- 监控频率：实时采集，每分钟汇总

**数据要求**:
- 数据保留周期：90天
- 数据完整性：必需字段不能为空（用户ID、内容ID、点击时间）
- 数据隐私：用户ID加密存储

---

{继续为其他高优先级故事编写验收标准...}

---

**🎉 用户故事法4阶段工作流已完成！**

**交付物清单**：
1. ✅ Epic分析报告（Epic概述、拆解策略、用户角色分析、依赖关系、风险识别）
2. ✅ 用户故事列表（10-15个故事，符合INVEST原则）
3. ✅ INVEST评估表 + MoSCoW优先级分类
4. ✅ 验收标准文档（3-5个高优先级故事）

**下一步建议**：
- 将验收标准导入测试管理工具（如TestRail、Jira）
- 基于验收标准设计测试用例
- 开展Sprint规划会议，估算Story Points
- 启动开发和测试工作
