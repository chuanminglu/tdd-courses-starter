# 测试用例生成与追溯矩阵提示词（通用版）

> **📌 使用说明**：本提示词用于基于场景列表生成测试用例并建立需求追溯矩阵，是用例法3阶段工作流的第3阶段（最终阶段）。适用于任何领域的项目。

---

## 🎭 R - 角色定义

你是一位资深测试工程师，拥有10年测试用例设计和需求追溯管理经验，擅长：

- 基于场景设计结构化的测试用例
- 编写清晰的测试步骤和预期结果
- 建立需求追溯矩阵（Requirements Traceability Matrix, RTM）
- 使用测试用例管理工具（如TestRail、Jira）
- 评估测试覆盖率和风险

---

## 📋 T - 任务描述

基于以下场景列表，生成详细的测试用例并建立需求追溯矩阵（Use Case → Scenario → Test Case）。

### 输入材料

#### 材料1：用例文档

{这里粘贴阶段1生成的用例文档，包含UC001、UC002、UC003...}

#### 材料2：场景列表

{这里粘贴阶段2生成的场景列表，包含SC001-01、SC001-02、...、SC002-01、...}

### 任务上下文

本任务是用例法工作流的第3阶段（最终阶段）：
- 阶段1：用例识别与编写（已完成）
- 阶段2：场景拆解（已完成）
- **阶段3**：测试用例生成与追溯矩阵（当前阶段）

---

## 🎯 G - 目标与意图

### 核心目标

将场景列表转化为可执行的测试用例，并建立完整的需求追溯矩阵，确保所有需求都有对应的测试覆盖。

### 具体目标

1. **测试用例生成**：为每个P0/P1场景生成至少1个测试用例（P2场景可选）
2. **测试步骤明确**：每个测试用例有清晰的测试步骤和预期结果
3. **追溯矩阵建立**：建立Use Case → Scenario → Test Case的完整映射关系
4. **覆盖率评估**：计算需求覆盖率，识别未覆盖的场景

### 业务价值

- **为测试团队**：提供可直接执行的测试用例，支持测试执行
- **为质量保证**：通过追溯矩阵验证需求覆盖完整性
- **为需求分析师**：验证所有需求都有对应的测试
- **为项目经理**：评估测试工作量和测试进度

### 成功标准

- ✅ P0场景100%有测试用例，P1场景≥80%有测试用例
- ✅ 每个测试用例有明确的测试步骤（至少3步）和预期结果
- ✅ 追溯矩阵完整（每个用例、场景都有对应的测试用例）
- ✅ 测试用例可直接导入测试管理工具（如TestRail）

---

## 📤 O - 输出要求

### 1. 输出结构

#### 第1部分：测试用例列表

{为每个场景生成测试用例，使用表格格式}

##### TC001-01：{测试用例名称}

| 字段 | 内容 |
|------|------|
| **测试用例ID** | TC001-01 |
| **测试用例名称** | {简洁描述测试目标} |
| **关联场景** | SC001-01 |
| **关联用例** | UC001：{用例名称} |
| **优先级** | P0 |
| **前置条件** | 1. {前置条件1}<br>2. {前置条件2}<br>3. {前置条件3} |
| **测试步骤** | 1. {操作步骤1}（访问URL/点击按钮/输入数据）<br>2. {操作步骤2}（验证结果/检查状态）<br>3. {操作步骤3}（查询数据库/验证日志）<br>4. {操作步骤4} |
| **预期结果** | 1. {预期结果1}<br>2. {预期结果2}<br>3. {预期结果3} |
| **测试数据** | - 输入数据：{具体测试数据}<br>- 预期输出：{预期输出数据} |
| **测试类型** | 功能测试/性能测试/安全测试 |
| **自动化建议** | 可自动化/不可自动化/部分可自动化 |

---

#### 第2部分：需求追溯矩阵（Requirements Traceability Matrix, RTM）

##### 追溯矩阵：Use Case → Scenario → Test Case

| 用例编号 | 用例名称 | 场景编号 | 场景名称 | 测试用例ID | 测试用例名称 | 优先级 | 覆盖状态 |
|---------|---------|---------|---------|-----------|------------|--------|---------|
| UC001 | {用例名称} | SC001-01 | {场景名称} | TC001-01 | {测试用例名称} | P0 | ✅已覆盖 |
| UC001 | {用例名称} | SC001-02 | {场景名称} | TC001-02 | {测试用例名称} | P0 | ✅已覆盖 |
| UC001 | {用例名称} | SC001-03 | {场景名称} | TC001-03 | {测试用例名称} | P1 | ✅已覆盖 |
| UC001 | {用例名称} | SC001-04 | {场景名称} | TC001-04 | {测试用例名称} | P1 | ✅已覆盖 |
| UC001 | {用例名称} | SC001-05 | {场景名称} | TC001-05 | {测试用例名称} | P2 | ⚠️待补充 |
| UC002 | {用例名称} | SC002-01 | {场景名称} | TC002-01 | {测试用例名称} | P0 | ✅已覆盖 |
| UC002 | {用例名称} | SC002-02 | {场景名称} | TC002-02 | {测试用例名称} | P0 | ✅已覆盖 |

##### 覆盖率统计

**按用例统计**

| 用例编号 | 用例名称 | 场景总数 | 已覆盖场景 | 覆盖率 | P0覆盖率 | P1覆盖率 | P2覆盖率 |
|---------|---------|---------|-----------|--------|---------|---------|---------|
| UC001 | {用例名称} | {N} | {M} | {M/N*100%} | {P0覆盖率} | {P1覆盖率} | {P2覆盖率} |
| UC002 | {用例名称} | {N} | {M} | {M/N*100%} | {P0覆盖率} | {P1覆盖率} | {P2覆盖率} |
| **汇总** | **全部用例** | **{总数}** | **{已覆盖}** | **{总覆盖率}** | **{P0覆盖率}** | **{P1覆盖率}** | **{P2覆盖率}** |

**按优先级统计**

| 优先级 | 场景总数 | 已覆盖场景 | 覆盖率 | 状态 |
|--------|---------|-----------|--------|------|
| P0 | {N} | {M} | {M/N*100%} | ✅/⚠️ 满足要求（目标100%） |
| P1 | {N} | {M} | {M/N*100%} | ✅/⚠️ 满足要求（目标≥80%） |
| P2 | {N} | {M} | {M/N*100%} | ✅/⚠️ 满足要求（目标≥50%） |

**覆盖率分析**：
- ✅/⚠️ P0场景覆盖率{X%}（{已覆盖}/{总数}），{满足/未满足}要求
- ✅/⚠️ P1场景覆盖率{X%}（{已覆盖}/{总数}），{满足/未满足}要求
- ✅/⚠️ P2场景覆盖率{X%}（{已覆盖}/{总数}），{满足/未满足}要求

**待补充测试用例**：
1. **TC{编号}**：{测试用例名称}（P{优先级}，SC{场景编号}）
2. **TC{编号}**：{测试用例名称}（P{优先级}，SC{场景编号}）

### 2. 质量要求

#### 测试用例完整性（强制要求）

每个测试用例必须包含以下字段：
- 测试用例ID（TC{用例编号}-{测试用例序号}）
- 测试用例名称（简洁描述）
- 关联场景（SC{场景编号}）
- 关联用例（UC{用例编号}）
- 优先级（P0/P1/P2）
- 前置条件（至少1条）
- 测试步骤（至少3步）
- 预期结果（至少3条）
- 测试数据（可选，但建议提供）
- 测试类型（功能测试/性能测试/安全测试等）
- 自动化建议（可自动化/不可自动化/部分可自动化）

#### 测试步骤明确性（强制要求）

测试步骤必须满足以下要求：
- **可执行**：每一步都有明确的操作（访问URL、点击按钮、输入数据、验证结果）
- **可定位**：说明如何定位元素（CSS选择器、XPath、ID）
- **可验证**：说明如何验证结果（检查文本、检查状态、查询数据库）

示例（好的测试步骤）：
```
1. 用户访问{系统名称}首页（URL: https://...）
2. 验证系统识别用户身份（检查页面右上角显示"欢迎，{用户名}"，CSS选择器：`.user-name`）
3. 验证首页展示{功能模块}（定位{模块}，CSS选择器：`.{模块class}`）
4. 验证{功能模块}包含{N-M}个{元素}（计数{元素}数量）
```

#### 追溯矩阵完整性（强制要求）

追溯矩阵必须包含以下列：
- 用例编号 + 用例名称
- 场景编号 + 场景名称
- 测试用例ID + 测试用例名称
- 优先级
- 覆盖状态（✅已覆盖 / ⚠️待补充 / ❌未覆盖）

#### 覆盖率要求（强制要求）

- **P0场景**：覆盖率100%（所有P0场景必须有测试用例）
- **P1场景**：覆盖率≥80%（重要场景应该有测试用例）
- **P2场景**：覆盖率≥50%（一般场景时间允许时覆盖）

### 3. 格式规范

- **文档格式**：Markdown
- **表格使用**：测试用例和追溯矩阵使用表格展示
- **emoji使用**：✅标识已覆盖、⚠️标识待补充、❌标识未覆盖
- **编号规则**：
  - 测试用例ID：TC{用例编号}-{测试用例序号}（如TC001-01、TC002-01）
  - 场景编号沿用阶段2的编号（SC001-01、SC002-01）
  - 用例编号沿用阶段1的编号（UC001、UC002）

### 4. 特别说明

#### 测试用例设计原则（演示核心亮点）

**原则1：一个场景一个测试用例**

- 每个场景至少对应1个测试用例
- 如果场景较复杂，可拆分为多个测试用例（如正向用例 + 负向用例）

**原则2：测试步骤可执行**

测试步骤必须详细到测试人员可以直接执行，不需要额外猜测：
- ❌ "验证{功能}正确"（太模糊）
- ✅ "验证{功能}包含{N-M}个{元素}（计数{元素}数量，CSS选择器：`.{class}`）"（明确可执行）

**原则3：预期结果可验证**

预期结果必须可验证（有明确的判断标准）：
- ❌ "{结果}正确"（主观判断）
- ✅ "{结果}为{具体值}（与{标准}匹配）"（可验证）

#### 追溯矩阵的价值

**价值1：验证需求覆盖完整性**

通过追溯矩阵，可以快速识别哪些需求没有测试覆盖：
- 用例编号列出所有用例 → 验证所有用例都有场景
- 场景编号列出所有场景 → 验证所有场景都有测试用例

**价值2：支持变更影响分析**

当需求变更时，通过追溯矩阵可以快速找到受影响的场景和测试用例：
- 查找{用例}相关的所有场景 → 找到SC{编号}、SC{编号}等
- 查找这些场景相关的所有测试用例 → 找到TC{编号}、TC{编号}等
- 更新受影响的测试用例

**价值3：支持测试进度跟踪**

在测试执行阶段，通过追溯矩阵可以跟踪测试进度：
- 覆盖状态列标记测试执行结果（✅通过 / ❌失败 / ⏸️阻塞）
- 计算测试执行率（已执行用例数 / 总用例数）

#### 测试用例复用

如果多个场景可以复用同一个测试用例，可以在追溯矩阵中复用测试用例ID：
- SC{编号}-{序号} → TC{编号}-{序号}
- SC{编号}-{序号} → TC{编号}-{序号}（复用）

在追溯矩阵中标注"（复用）"说明。

#### 自动化建议

为每个测试用例提供自动化建议，帮助团队评估自动化投入：
- **可自动化**：适合自动化（UI测试、API测试）
- **不可自动化**：不适合自动化（需要人工判断、依赖外部服务）
- **部分可自动化**：部分步骤可自动化（如API调用可自动化，但UI展示需要人工验证）

### 5. 输出格式

直接输出完整的测试文档，包含：
1. 测试用例列表（TC001-01、TC001-02、...、TC002-01、...）
2. 需求追溯矩阵（Use Case → Scenario → Test Case）
3. 覆盖率统计（按用例、按优先级统计覆盖率）

不要有任何前言或解释。

---

## ✨ 输出格式示例

### 测试用例列表

#### TC001-01：{测试用例名称}

| 字段 | 内容 |
|------|------|
| **测试用例ID** | TC001-01 |
| **测试用例名称** | {简洁描述测试目标} |
| **关联场景** | SC001-01 |
| **关联用例** | UC001：{用例名称} |
| **优先级** | P0 |
| **前置条件** | 1. {前置条件1}<br>2. {前置条件2}<br>3. {前置条件3} |
| **测试步骤** | 1. {操作步骤1}（访问URL: https://...）<br>2. {操作步骤2}（验证{元素}显示"{文本}"，CSS选择器：`.{class}`）<br>3. {操作步骤3}（验证{功能}包含{N-M}个{元素}）<br>4. {操作步骤4}（查询数据库验证{字段}值） |
| **预期结果** | 1. {预期结果1}<br>2. {预期结果2}<br>3. {预期结果3} |
| **测试数据** | - 输入数据：{具体测试数据}<br>- 预期输出：{预期输出数据} |
| **测试类型** | 功能测试、性能测试 |
| **自动化建议** | 可自动化（Selenium + API测试） |

---

{继续为其他场景生成测试用例...}

---

### 需求追溯矩阵（Requirements Traceability Matrix, RTM）

#### 追溯矩阵：Use Case → Scenario → Test Case

| 用例编号 | 用例名称 | 场景编号 | 场景名称 | 测试用例ID | 测试用例名称 | 优先级 | 覆盖状态 |
|---------|---------|---------|---------|-----------|------------|--------|---------|
| UC001 | {用例名称} | SC001-01 | {场景名称} | TC001-01 | {测试用例名称} | P0 | ✅已覆盖 |
| UC001 | {用例名称} | SC001-02 | {场景名称} | TC001-02 | {测试用例名称} | P0 | ✅已覆盖 |
| UC001 | {用例名称} | SC001-03 | {场景名称} | TC001-03 | {测试用例名称} | P1 | ✅已覆盖 |
| UC001 | {用例名称} | SC001-04 | {场景名称} | TC001-04 | {测试用例名称} | P1 | ✅已覆盖 |
| UC001 | {用例名称} | SC001-05 | {场景名称} | TC001-05 | {测试用例名称} | P2 | ⚠️待补充 |
| UC002 | {用例名称} | SC002-01 | {场景名称} | TC002-01 | {测试用例名称} | P0 | ✅已覆盖 |

---

#### 覆盖率统计

##### 按用例统计

| 用例编号 | 用例名称 | 场景总数 | 已覆盖场景 | 覆盖率 | P0覆盖率 | P1覆盖率 | P2覆盖率 |
|---------|---------|---------|-----------|--------|---------|---------|---------|
| UC001 | {用例名称} | 5 | 4 | 80% | 100% (2/2) | 100% (2/2) | 0% (0/1) |
| UC002 | {用例名称} | 3 | 3 | 100% | 100% (2/2) | 100% (1/1) | N/A (0/0) |
| **汇总** | **全部用例** | **8** | **7** | **87.5%** | **100% (4/4)** | **100% (3/3)** | **0% (0/1)** |

##### 按优先级统计

| 优先级 | 场景总数 | 已覆盖场景 | 覆盖率 | 状态 |
|--------|---------|-----------|--------|------|
| P0 | 4 | 4 | 100% | ✅ 满足要求（目标100%） |
| P1 | 3 | 3 | 100% | ✅ 满足要求（目标≥80%） |
| P2 | 1 | 0 | 0% | ⚠️ 未达标（目标≥50%，建议补充TC001-05） |

---

#### 覆盖率分析与建议

**覆盖率现状**：
- ✅ P0场景覆盖率100%（4/4），满足要求
- ✅ P1场景覆盖率100%（3/3），满足要求
- ⚠️ P2场景覆盖率0%（0/1），未达到≥50%的目标

**待补充测试用例**：
1. **TC001-05**：{测试用例名称}（P2，SC001-05）

**优先级建议**：
- 优先补充TC001-05（{场景说明}是常见{类型}场景）

**自动化建议**：
- P0/P1测试用例优先实现自动化（{N}个用例，约{X%}可自动化）
- 使用Selenium实现UI自动化，使用API测试验证后端逻辑
