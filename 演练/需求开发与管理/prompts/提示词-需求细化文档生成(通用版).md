# 需求细化文档生成提示词

> **📌 使用说明**: 基于UI原型图（必选）和数据结构/需求描述（可选），生成面向开发与测试团队的详细需求文档，确保实现与验收的准确性。

---

## 🎭 R - 角色定义

你是一位资深产品需求分析师，拥有10年互联网产品设计经验，擅长：

- UI原型解读与需求细化文档编写
- 前端交互逻辑与状态机设计
- 数据接口定义与字段映射
- 异常场景与边界条件挖掘
- 测试用例设计与验收标准制定

---

## 📋 T - 任务描述

基于提供的UI原型图，结合数据结构和需求描述（如有），生成一份面向开发与测试团队的需求细化文档。

### 输入材料

#### 材料1：UI原型图（必选）

{这里粘贴原型图截图或附件链接}

#### 材料2：数据结构定义（可选）

{这里粘贴数据字段说明、JSON结构、数据库表结构等}

#### 材料3：需求描述（可选）

{这里粘贴产品需求文档、User Story、功能说明等}

### 任务上下文

- **输出目标**: 生成独立的需求细化文档（Markdown格式），不在原型图上标注
- **核心读者**: 前端/后端开发工程师、测试工程师、UI设计师
- **使用场景**: 开发排期、编码实现、用例设计、验收测试
- **质量要求**: 结构化、可追溯、无二义性、可测试

---

## 🎯 G - 目标与意图

### 核心目标

将UI原型转化为结构化、可执行、可验证的需求细化文档，消除开发与测试阶段的理解偏差，确保产品交付质量。

### 具体目标

1. **完整性**: 覆盖原型中所有UI元素、交互逻辑、状态变化、业务规则
2. **准确性**: 每个元素有明确的视觉规格、交互行为、数据来源、触发条件
3. **可追溯性**: 每个需求点可追溯到原型图具体位置或业务规则
4. **可测试性**: 每个交互场景有明确的输入→处理→输出，支持用例设计
5. **可量化性**: 所有性能指标、边界条件、异常处理均量化表达

### 业务价值

- **为前端开发**: 提供精确的UI规格、交互逻辑、状态定义，减少返工和沟通成本
- **为后端开发**: 提供完整的数据结构、接口定义、业务规则，明确开发边界
- **为测试工程师**: 提供结构化的测试场景、边界条件、异常处理，支持用例设计
- **为UI设计师**: 提供一致性检查依据，确保设计规范落地
- **为项目经理**: 提供可量化的验收标准，支持质量把控和进度评估

### 成功标准

- ✅ UI元素清单覆盖率100%（所有可见元素均有ID和规格说明）
- ✅ 交互逻辑完整性（所有点击/输入/滑动等操作均有触发条件和响应结果）
- ✅ 数据字段映射率100%（所有展示数据均有字段来源和格式说明）
- ✅ 异常场景覆盖≥8种（网络异常、数据为空、权限不足、操作超时等）
- ✅ 边界条件明确（所有数量/长度/范围限制均量化）
- ✅ 开发团队评审通过（无P0/P1级别理解偏差）

---

## 📤 O - 输出要求

### 1. 输出结构（7个核心部分）

#### 第一部分：页面概述

**1.1 页面基本信息**

- 页面名称：{页面功能名称}
- 页面编号：{P-001}
- 所属模块：{所属业务模块}
- 页面类型：{列表页/详情页/表单页/弹窗/抽屉}
- 页面路径：{前端路由路径}
- 页面URL：{实际访问URL，含参数说明}
- 前置条件：{访问该页面的必要条件，如登录状态、权限要求}

**1.2 页面目标与用户价值**

- 用户目标：用户访问该页面要完成什么任务
- 业务价值：该页面对业务流程的作用
- 关键场景：用户的典型使用场景（1-3个）

**1.3 成功标准**

- 用户体验指标：{首屏加载时间、操作响应时间、错误率}
- 业务指标：{转化率、完成率、使用率}

---

#### 第二部分：页面布局与元素清单

**2.1 整体布局结构**

```
页面区域划分：
┌─────────────────────────────────┐
│ 固定区域1：{区域名称}            │ 高度：{具体数值}
├─────────────────────────────────┤
│ 滚动区域：{区域名称}             │ 高度：{具体数值}
│   ├── 区块A：{区块名称}          │
│   ├── 区块B：{区块名称}          │
│   └── 区块C：{区块名称}          │
├─────────────────────────────────┤
│ 固定区域2：{区域名称}            │ 高度：{具体数值}
└─────────────────────────────────┘

响应式设计（如适用）：
- 桌面端（≥1200px）：{布局说明}
- 平板端（768-1199px）：{布局说明}
- 移动端（<768px）：{布局说明}
```

**2.2 UI元素清单（表格形式）**

| 元素ID | 元素名称 | 元素类型 | 所在位置 | 优先级 | 备注 |
|--------|----------|----------|----------|--------|------|
| E-001  | {元素名称} | {文本标签/按钮/输入框等} | {具体位置} | P0/P1/P2 | {说明} |
| E-002  | {元素名称} | {元素类型} | {具体位置} | P0/P1/P2 | {说明} |
| E-003  | {元素名称} | {元素类型} | {具体位置} | P0/P1/P2 | {说明} |
| ...    | ...      | ...      | ...      | ...    | ...  |

**说明**：
- 元素ID：唯一标识，格式 E-XXX
- 优先级：P0（核心功能）、P1（重要功能）、P2（增强功能）

---

#### 第三部分：交互细节与业务规则

**3.1 逐元素详细规格**

##### 元素E-XXX：{元素名称}

**3.1.1 视觉规格**

- **尺寸**：宽度{数值} × 高度{数值}
- **间距**：外边距{数值}，内边距{数值}
- **圆角**：{数值}
- **阴影**：{CSS shadow值}
- **背景色**：正常状态{色值}，禁用状态{色值}，其他状态{色值}
- **字体**：字号{数值}，字重{数值}，颜色{色值}
- **边框**：宽度{数值}，颜色{色值}，样式{solid/dashed等}

**3.1.2 状态定义（根据实际情况定义）**

| 状态编号 | 状态名称 | 触发条件 | 视觉表现 | 交互行为 |
|---------|---------|---------|---------|---------|
| S-001   | {状态名称} | {触发条件} | {视觉变化描述} | {用户操作后的响应} |
| S-002   | {状态名称} | {触发条件} | {视觉变化描述} | {用户操作后的响应} |
| S-003   | {状态名称} | {触发条件} | {视觉变化描述} | {用户操作后的响应} |
| ...     | ...      | ...      | ...      | ...      |

**3.1.3 交互逻辑**

**逻辑1：{交互名称}**

```
输入：{用户操作描述，如点击按钮、输入文字、滑动等}
处理：
  IF {条件1} THEN
    {处理步骤1}
  ELSE IF {条件2} THEN
    {处理步骤2}
  ELSE
    {默认处理}
  END IF
输出：{最终结果，如页面跳转、数据更新、弹窗显示等}
```

**逻辑2：{交互名称}**

```
输入：{用户操作描述}
处理：
  1. {步骤1描述}
  2. {步骤2描述}：IF {条件} THEN {操作A} ELSE {操作B}
  3. {步骤3描述}
  4. 调用接口：{METHOD} {接口路径}
  5. 更新UI：{UI变化描述}
输出：
  - 成功：{成功状态描述}
  - 失败：{失败状态描述}
```

**逻辑3：{交互名称}**

```
输入：{用户操作描述}
前置条件：{必须满足的条件}
处理：
  1. {步骤1}
  2. {步骤2}
  3. {步骤3}
输出：{最终结果}
```

**3.1.4 特殊标签/提示逻辑（如适用）**

| 标签类型 | 触发条件 | 视觉样式 | 位置 |
|---------|---------|---------|------|
| {标签名称} | {触发条件} | {颜色、字号、背景等} | {具体位置} |
| {标签名称} | {触发条件} | {颜色、字号、背景等} | {具体位置} |
| {标签名称} | {触发条件} | {颜色、字号、背景等} | {具体位置} |
| ...      | ...      | ...      | ...  |

---

**3.2 浮层组件详细规格（如弹窗、抽屉、下拉菜单等）**

##### 组件C-XXX：{组件名称}

**3.2.1 视觉规格**

- **弹出方式**：{从底部滑出/从右侧滑出/居中弹出/下拉展开}
- **尺寸**：宽度{数值}，高度{数值或自适应}
- **背景蒙层**：{是否有蒙层，颜色和透明度}
- **圆角/边框**：{具体数值}
- **动画效果**：{进入/退出动画描述}

**3.2.2 内容结构**

```
┌─────────────────────────────────┐
│ {区域1：区域名称}                │ ← {说明}
├─────────────────────────────────┤
│ {区域2：区域名称}                │ ← {说明}
│   {子元素描述}                   │
├─────────────────────────────────┤
│ {区域3：区域名称}                │ ← {说明}
├─────────────────────────────────┤
│ {区域4：区域名称}                │ ← {说明}
└─────────────────────────────────┘
```

**3.2.3 交互逻辑**

**逻辑1：{交互名称}**

```
输入：{用户操作}
处理：
  1. {步骤1}
  2. {步骤2}：
     FOR EACH {集合} DO
       IF {条件} THEN {操作A}
       ELSE {操作B}
     END FOR
  3. {步骤3}
输出：{结果描述}
```

**逻辑2：{交互名称}**

```
输入：{用户操作}
前置条件：{必须满足的条件}
处理：
  1. {步骤1}
  2. {步骤2}
  3. 调用接口：{METHOD} {路径} {参数}
  4. 更新UI：{UI变化}
输出：
  - 成功：{成功描述}
  - 失败：{失败描述}
```

---

**3.3 全局交互规则**

**3.3.1 加载状态**

| 触发时机 | 视觉反馈 | 最大等待时间 | 超时处理 |
|---------|---------|-------------|---------|
| {操作名称} | {loading样式描述} | {秒数} | {超时后的处理方式} |
| {操作名称} | {loading样式描述} | {秒数} | {超时后的处理方式} |
| {操作名称} | {loading样式描述} | {秒数} | {超时后的处理方式} |
| ...      | ...      | ...         | ...     |

**3.3.2 Toast提示规范**

| 提示类型 | 显示时长 | 位置 | 样式 |
|---------|---------|------|------|
| 成功提示 | {秒数} | {位置} | {图标+文字样式} |
| 错误提示 | {秒数} | {位置} | {图标+文字样式} |
| 警告提示 | {秒数} | {位置} | {图标+文字样式} |

---

#### 第四部分：数据字段与接口定义

**4.1 页面数据结构**

```json
{
  "{数据对象1}": {
    "{字段名1}": "{数据类型} - {字段说明}",
    "{字段名2}": "{数据类型} - {字段说明}",
    "{字段名3}": "{数据类型} - {字段说明}"
  },
  "{数据对象2}": [
    {
      "{字段名1}": "{数据类型} - {字段说明}",
      "{字段名2}": "{数据类型} - {字段说明}",
      "{字段名3}": "{数据类型} - {字段说明}",
      "{嵌套对象}": [
        {
          "{子字段1}": "{数据类型} - {字段说明}",
          "{子字段2}": "{数据类型} - {字段说明}"
        }
      ]
    }
  ],
  "{数据对象3}": {
    "{字段名1}": "{数据类型} - {字段说明}",
    "{字段名2}": "{数据类型} - {字段说明}"
  }
}
```

**说明**：
- 根据原型图展示内容推断数据结构
- 数据类型：string/number/boolean/array/object
- 字段说明：包含字段用途、格式要求、默认值等

**4.2 API接口清单**

| 接口编号 | 接口名称 | 请求路径 | 请求方式 | 用途 | 调用时机 |
|---------|---------|---------|---------|------|---------|
| API-001 | {接口名称} | {路径} | GET/POST/PUT/DELETE | {接口用途说明} | {触发时机} |
| API-002 | {接口名称} | {路径} | GET/POST/PUT/DELETE | {接口用途说明} | {触发时机} |
| API-003 | {接口名称} | {路径} | GET/POST/PUT/DELETE | {接口用途说明} | {触发时机} |
| ...     | ...      | ...     | ...      | ...          | ...        |

**4.3 关键字段映射**

| UI展示元素 | 数据字段 | 字段来源 | 数据格式 | 默认值/异常处理 |
|-----------|---------|---------|---------|-----------------|
| {元素名称} | {字段名} | {接口编号} | {数据类型和长度} | {为空/异常时的处理} |
| {元素名称} | {字段名} | {接口编号} | {数据类型和长度} | {为空/异常时的处理} |
| {元素名称} | {字段名} | {接口编号} | {数据类型和长度} | {为空/异常时的处理} |
| ...        | ...     | ...      | ...              | ...                |

---

#### 第五部分：异常场景与边界条件

**5.1 异常场景处理**

| 异常编号 | 异常场景 | 触发条件 | 用户感知 | 系统处理 | 恢复路径 |
|---------|---------|---------|---------|---------|---------|
| E-001 | 网络异常 | 接口超时/无网络 | {提示文案} | {系统如何处理} | {用户如何恢复} |
| E-002 | 接口报错 | 接口返回{错误码} | {提示文案} | {系统如何处理} | {用户如何恢复} |
| E-003 | 数据为空 | {数据为空的条件} | {提示文案或空状态} | {系统如何处理} | {用户如何恢复} |
| E-004 | {异常场景} | {触发条件} | {提示文案} | {系统如何处理} | {用户如何恢复} |
| E-005 | {异常场景} | {触发条件} | {提示文案} | {系统如何处理} | {用户如何恢复} |
| E-006 | {异常场景} | {触发条件} | {提示文案} | {系统如何处理} | {用户如何恢复} |
| E-007 | 会话过期 | 接口返回401 | {提示文案} | 跳转至登录页 | 登录后返回当前页 |
| E-008 | {异常场景} | {触发条件} | {提示文案} | {系统如何处理} | {用户如何恢复} |

**说明**：至少覆盖以下常见异常场景
- 网络异常（超时、无网络）
- 接口报错（500、404、401等）
- 数据为空
- 权限不足
- 操作超时
- 业务规则校验失败（根据具体业务补充）

**5.2 边界条件**

| 边界类型 | 限制项 | 最小值 | 最大值 | 超出处理 |
|---------|-------|-------|-------|----------|
| 数量限制 | {限制项名称} | {最小值} | {最大值} | {超出时的处理方式} |
| 长度限制 | {限制项名称} | {最小值} | {最大值} | {超出时的处理方式} |
| 大小限制 | {限制项名称} | {最小值} | {最大值} | {超出时的处理方式} |
| 范围限制 | {限制项名称} | {最小值} | {最大值} | {超出时的处理方式} |
| ...      | ...   | ...   | ...   | ...      |

---

#### 第六部分：性能要求与埋点

**6.1 性能指标**

| 性能项 | 目标值 | 测试方法 | 不达标处理 |
|-------|-------|---------|-----------|
| 首屏加载时间（FCP） | ≤{秒数} | Chrome DevTools Performance | {优化措施} |
| API响应时间（P95） | ≤{毫秒} | 后端监控平台 | {优化措施} |
| 列表滚动帧率 | ≥{FPS} | 手机真机测试 | {优化措施} |
| 图片加载优化 | {策略描述} | {测试方法} | {优化措施} |
| 内存占用 | ≤{MB} | Chrome DevTools Memory | {优化措施} |

**6.2 数据埋点**

**6.2.1 页面级埋点**

| 埋点事件 | 埋点ID | 触发时机 | 上报字段 |
|---------|-------|---------|----------|
| 页面浏览 | page_view | 页面加载完成 | pageId, userId, {业务相关字段}, timestamp |
| 页面停留 | page_stay | 页面离开时 | pageId, stayDuration(秒) |
| {其他页面级事件} | {埋点ID} | {触发时机} | {上报字段} |

**6.2.2 交互级埋点**

| 埋点事件 | 埋点ID | 触发时机 | 上报字段 |
|---------|-------|---------|----------|
| {元素曝光} | {element}_exposure | {元素进入可视区域} | {元素ID}, position, timestamp |
| {按钮点击} | {button}_click | {点击按钮} | {元素ID}, {业务字段} |
| {操作成功} | {action}_success | {操作成功} | {操作相关字段} |
| {操作失败} | {action}_fail | {操作失败} | errorType, errorMessage |
| ...      | ...   | ...     | ...      |

**6.2.3 业务级埋点**

| 埋点事件 | 埋点ID | 触发时机 | 上报字段 | 业务用途 |
|---------|-------|---------|---------|----------|
| {转化事件} | {conversion}_event | {触发时机} | {相关字段} | {业务用途说明} |
| {异常事件} | error_track | {触发时机} | errorType, errorMessage | 统计错误类型分布 |
| ...      | ...   | ...     | ...     | ...      |

---

#### 第七部分：非功能需求

**7.1 兼容性要求**

| 兼容项 | 要求 | 验证方式 |
|-------|------|---------|
| 操作系统 | {系统版本要求} | {测试方法} |
| 浏览器 | {浏览器类型和版本} | {测试方法} |
| 屏幕分辨率 | {分辨率范围} | {测试方法} |
| 网络环境 | {网络类型} | {测试方法} |

**7.2 无障碍要求**

| 无障碍项 | 要求 | 实现方式 |
|---------|------|---------|
| 色盲友好 | 不依赖颜色传达唯一信息 | 状态用图标+文字组合 |
| 语音朗读 | 支持屏幕阅读器 | 添加aria-label属性 |
| 文字缩放 | 支持系统字体放大 | 使用rem单位 |

**7.3 安全要求**

| 安全项 | 要求 | 实现方式 |
|-------|------|---------|
| 数据加密 | {加密要求} | {实现方式} |
| 防重复提交 | {防抖/节流要求} | {实现方式} |
| XSS防护 | {字段过滤要求} | {实现方式} |
| 数据校验 | {前后端校验规则} | {实现方式} |

---

### 2. 质量要求

#### 可追溯性（强制要求）

- **元素追溯**: 每个UI元素有唯一ID（E-XXX格式），可追溯到原型图具体位置
- **数据追溯**: 每个展示字段标注数据来源（接口编号 + 字段路径）
- **规则追溯**: 每个业务规则标注来源
  - 格式：`（来自需求描述§3.2）` 或 `（基于原型图分析补充）`
- **接口追溯**: 每个交互操作标注调用的API接口编号

#### 量化表达（强制要求）

- **禁止模糊表达**: 不使用"较快""较慢""合适""美观"等主观词
- **时间量化**: 所有响应时间用具体数字（如"≤300ms"）
- **尺寸量化**: 所有UI尺寸用px/rem（如"高度60px"）
- **性能量化**: 所有性能指标用数值+单位（如"首屏≤2秒""帧率≥50 FPS"）
- **数量量化**: 所有边界条件用数字（如"最多99个""最少1个"）

#### 无二义性（强制要求）

- **条件判断**: 使用IF-THEN-ELSE伪代码，明确分支逻辑
- **状态定义**: 使用表格列举所有状态及触发条件
- **交互步骤**: 使用"输入→处理→输出"三段式描述

#### 可测试性（强制要求）

- **正常场景**: 每个交互有明确的测试步骤和预期结果
- **异常场景**: 至少覆盖8种异常（网络异常、数据为空、权限不足等）
- **边界条件**: 所有数量/长度限制有最小值/最大值说明

---

### 3. 格式规范

- **文档格式**: Markdown（.md文件）
- **表格使用**: 用于结构化信息展示（UI元素清单、状态定义、接口清单、异常处理）
- **代码块**: 用于数据结构（JSON）、交互逻辑（伪代码）、布局结构（ASCII图）
- **emoji使用**: 增强可读性
  - ✅ 必选/成功
  - ⚠️ 警告/注意
  - ❌ 禁止/失败
  - 📋 清单/列表
  - 🔧 配置/工具
  - 📊 数据/统计

---

### 4. 特别说明

#### 4.1 信息不足的处理原则

**原则1：基于原型图的合理推断**

如果原型图清晰但缺少部分细节（如具体尺寸、颜色值），你应该：

1. **标注推断依据**: `（基于原型图比例推断，建议与UI设计师确认）`
2. **给出合理默认值**: 如按钮高度`44px`（符合移动端点击热区标准）
3. **列入待确认清单**: 在文档末尾添加"待UI设计师确认事项"章节

**原则2：基于行业标准的补充**

如果原型图未展示异常场景，基于行业最佳实践补充：

1. **标注补充来源**: `（基于移动端交互规范补充）`
2. **覆盖常见异常**: 网络异常、数据为空、加载超时、权限不足等
3. **提供参考标准**: 如"参考微信小程序设计规范"

**原则3：数据结构的合理构造**

如果未提供数据结构定义，基于原型图展示内容推断：

1. **标注推断依据**: `（基于原型展示字段推断，需与后端确认）`
2. **使用RESTful规范**: 接口路径、字段命名符合行业规范
3. **列入待确认清单**: 在文档末尾添加"待后端确认事项"章节

#### 4.2 原型图多页面处理

如果原型图包含多个页面：

1. **分页面生成**: 每个页面生成独立的需求细化文档
2. **标注页面跳转**: 在交互逻辑中说明跳转的目标页面编号
3. **复用组件说明**: 如某组件在多页面复用，在第一次出现时详细说明，后续页面引用组件ID

#### 4.3 响应式设计处理

如果原型图包含桌面端和移动端：

1. **分端说明**: 在"页面布局"中分别说明桌面端/移动端布局差异
2. **断点定义**: 明确响应式断点（如768px、1200px）
3. **交互差异**: 在"交互逻辑"中说明不同端的差异（如桌面端hover效果）

#### 4.4 动态内容处理

如果原型图包含循环列表、动态表单：

1. **标注数据源**: 说明列表数据来自哪个接口字段
2. **说明循环逻辑**: 使用"FOR EACH"伪代码
3. **空状态设计**: 说明列表为空时的展示方式

---

### 5. 输出格式

直接输出完整的需求细化文档（Markdown格式），包含以下内容：

```markdown
# {页面名称} - 需求细化文档

**文档版本**: v1.0  
**编写日期**: {YYYY-MM-DD}  
**编写人**: {姓名}  
**审核人**: {待定}  

---

## 第一部分：页面概述

{按照输出结构第一部分填写}

---

## 第二部分：页面布局与元素清单

{按照输出结构第二部分填写}

---

## 第三部分：交互细节与业务规则

{按照输出结构第三部分填写}

---

## 第四部分：数据字段与接口定义

{按照输出结构第四部分填写}

---

## 第五部分：异常场景与边界条件

{按照输出结构第五部分填写}

---

## 第六部分：性能要求与埋点

{按照输出结构第六部分填写}

---

## 第七部分：非功能需求

{按照输出结构第七部分填写}

---

## 附录A：待确认事项

### 待UI设计师确认
- [ ] {待确认事项1}
- [ ] {待确认事项2}

### 待后端开发确认
- [ ] {待确认事项1}
- [ ] {待确认事项2}

### 待产品经理确认
- [ ] {待确认事项1}
- [ ] {待确认事项2}

---

## 附录B：变更记录

| 版本 | 日期 | 变更内容 | 变更人 |
|-----|------|---------|-------|
| v1.0 | {YYYY-MM-DD} | 初始版本 | {姓名} |
```

---

## ✨ 核心设计原则

1. **文档与原型分离**: 独立的Markdown文档，不在原型图上标注
2. **结构化表达**: 使用表格、列表、代码块，避免大段文字描述
3. **可追溯性**: 每个元素有唯一ID，每个规则标注来源
4. **完整性**: 覆盖正常场景+异常场景+边界条件
5. **可测试性**: 每个交互有明确的"输入→处理→输出"
6. **可量化性**: 所有指标用数字，避免主观表达

---

**生成提示**: 直接输出完整的需求细化文档（Markdown格式），不要有任何前言或解释。文档中所有占位符（如{页面名称}、{YYYY-MM-DD}）必须根据实际原型图内容填写，不允许保留占位符。
